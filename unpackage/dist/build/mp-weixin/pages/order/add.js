(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/add"],{"0c25":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={globalData:{isRequest:0,user_info:"",open_id:"",uid:0,token:"",shop_info:"",serviceadr:""},isLogin:function(t,n){e.showToast({title:n,icon:"none",mask:!0,complete:function(){setTimeout((function(){t<0&&wx.navigateTo({url:"/pages/index/index"})}),1500)}})},onLaunch:function(){console.log("App Launch")},onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide")}};t.default=n}).call(this,n("543d")["default"])},"331e":function(e,t,n){},5910:function(e,t,n){"use strict";n.r(t);var i=n("76bf"),s=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=s.a},"5af8":function(e,t,n){"use strict";var i=n("331e"),s=n.n(i);s.a},"76bf":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("a0b1")),s=a(n("9cf4"));function a(e){return e&&e.__esModule?e:{default:e}}var o=n("44f1"),r={data:function(){return{user_info:"",token:"",address:"",img_list:[],img_num:0,multiArray:[[],[]],multiIndex:[0,0],serverName:"请选择服务类型",serverid:0,storename:s.default.globalData.user_info.storeName,prohibit:!1,show_trade:!1,trade:""}},onLoad:function(e){for(var t=0;t<7;t++)this.getDay(t);this.getHours()},onShow:function(){var e=this;this.user_info=s.default.globalData.user_info,this.user_info?(this.token=s.default.globalData.user_info.token,this.request({url:i.default.addressDefault,header:{token:this.token},method:"POST",success:function(t){200==t.code?o.isBlank(t.data)||(e.address=t.data):s.default.isLogin(t.code,t.msg)}}),this.repairtrade()):wx.reLaunch({url:"/pages/index/index"})},methods:{repairtrade:function(){var e=this,t=s.default.globalData.user_info.storeID;wx.request({url:i.default.repairTrade,data:{storeID:t},success:function(t){e.trade=t.data}})},getDay:function(e){var t=new Date,n=t.getTime()+864e5*e;t.setTime(n);var i=t.getFullYear(),s=t.getMonth(),a=t.getDate();s=this.doHandleMonth(s+1),a=this.doHandleMonth(a),this.multiArray[0].push(i+"-"+s+"-"+a)},getHours:function(){for(var e=new Date,t=e.getHours(),n=t;n<=22;n+=2)this.multiArray[1].push(n+":00~"+(n+2)+":00")},doHandleMonth:function(e){var t=e;return 1==e.toString().length&&(t="0"+e),t},bindMultiPickerChange:function(e){this.multiIndex=e.detail.value},select:function(){o.isBlank(this.address)?wx.navigateTo({url:"../address/add"}):wx.navigateTo({url:"../address/select"})},selectTrade:function(){this.show_trade=!0},inputStore:function(e){this.storename=e.detail.value},checkTrade:function(e,t){this.serverName=e,this.serverid=t,this.show_trade=!1},uploadDIY:function(e,t,n,s,a){var o=this,r=this;wx.uploadFile({url:i.default.orderUpload,filePath:e[s],name:"file",header:{"content-type":"application/json",token:r.token},success:function(e){console.log(e);var n=r.img_list.length+1;t++,r.img_list.push(e.data),r.img_num=n},fail:function(e){n++},complete:function(){++s==a?wx.hideLoading():o.uploadDIY(e,t,n,s,a)}})},choosePic:function(){var e=this;wx.chooseImage({count:6,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){t.tempFilePaths;var n=t.tempFilePaths.length;e.uploadDIY(t.tempFilePaths,0,0,0,n)}})},formSubmit:function(t){var n=t.detail.value;if(n.serverName=this.serverName,n.serverID=this.serverid,o.isBlank(this.address))e.showToast({title:"请选择服务地址",icon:"none"});else if(n.linkman=this.address.linkman,n.mobile=this.address.mobile,n.positionAddress=this.address.positionAddress,n.address=this.address.address,n.positionCity=this.address.positionCity,n.longitude=this.address.longitude,n.latitude=this.address.latitude,o.isBlank(n.remark))wx.showToast({title:"请描述报修故障及内容",icon:"none"});else if(0!=n.serverID){n.customer_time=this.multiArray[0][this.multiIndex[0]]+" "+this.multiArray[1][this.multiIndex[1]];var a=this.img_list;n.pics=a.join(),this.prohibit=!0,this.request({url:i.default.orderAdd,data:n,header:{token:this.token},method:"POST",success:function(e){console.log(e),200==e.code?wx.switchTab({url:"index"}):s.default.isLogin(e.code,e.msg)}})}else wx.showToast({title:"请选择服务类型",icon:"none"})},preImage:function(e){wx.previewImage({current:e,urls:this.img_list})},picsDelete:function(e){this.img_list.splice(e,1),this.img_num--}}};t.default=r}).call(this,n("543d")["default"])},"93f5":function(e,t,n){"use strict";n.r(t);var i=n("0c25"),s=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=s.a},"9cf4":function(e,t,n){"use strict";n.r(t);var i=n("93f5");for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);n("c807");var a,o,r,u,d=n("f0c5"),l=Object(d["a"])(i["default"],a,o,!1,null,null,null,!1,r,u);t["default"]=l.exports},c807:function(e,t,n){"use strict";var i=n("e8bb"),s=n.n(i);s.a},c84b:function(e,t,n){"use strict";var i,s=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}))},d99a:function(e,t,n){"use strict";(function(e){n("616b");i(n("66fd"));var t=i(n("e1cd"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},e1cd:function(e,t,n){"use strict";n.r(t);var i=n("c84b"),s=n("5910");for(var a in s)"default"!==a&&function(e){n.d(t,e,(function(){return s[e]}))}(a);n("5af8");var o,r=n("f0c5"),u=Object(r["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);t["default"]=u.exports},e8bb:function(e,t,n){}},[["d99a","common/runtime","common/vendor"]]]);